function loadComments(){
    let xhr = new XMLHttpRequest();
    let game_id = document.getElementById("game-id").value;
    xhr.open("GET", `/comments/${game_id}/`);
    xhr.timeout = 1000;
    xhr.onload = function(reponse){
        let comment_container = document.getElementById("comment-section");
        comment_container.innerHTML = xhr.responseText;
    }
    xhr.send();
}


$(function() {
    $("#comment-form").submit(function(event) {
        event.preventDefault();
        var commentForm = $(this);
        var posting = $.post( commentForm.attr('action'), commentForm.serialize() );
        posting.done(function(data) {
            document.getElementById("comment-box").value = "";
            loadComments();
        });
        posting.fail(function(data) {
            // 4xx or 5xx response, alert user about failure
        });
    });
});


/*
$("textarea").each(function () {
    this.setAttribute("style", "height:" + (this.scrollHeight) + "px;overflow-y:hidden;");
  }).on("input", function () {
    this.style.height = "auto";
    this.style.height = (this.scrollHeight) + "px";
  });*/